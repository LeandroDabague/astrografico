<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Painel de Senhas</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: url('assets/fundo.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    font-family: sans-serif;
    display: flex;
    height: 100vh;
  }
  #painel-esquerdo {
    width: 30%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    font-size: 5rem;
  }
  #painel-direito {
    width: 70%;
    background: lime; /* transparent para mostrar o fundo */
    display: flex;
    align-items: center;
    justify-content: center;
  }
  #midiashow img, #midiashow video {
    max-width: 100%;
    max-height: 100%;
    border-radius: 0px; /* Arredondamento dos cantinhos */
  }

  @keyframes piscar {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }
  .piscar {
    animation: piscar 0.4s ease-in-out 3;
  }
</style>
</head>
<body>
<!-- //////////////////////////////////// --kiosk "file:///C:/Users/leandro.dabague/Desktop/ProjetoSenha/senha.html" --edge-kiosk-type=fullscreen -->
  <div id="painel-esquerdo">
    <div id="logo"><img src="file:///C:/Users/leandro.dabague/Desktop/ProjetoSenha/Assets/logo.png" width="440" ><br><br><br><br></div>
    <div id="senha"> &nbsp; </div>
    <div id="balcao"> &nbsp; </div>
  </div>

  <div id="painel-direito">
    <div id="midiashow"></div>
  </div>
<!-- //////////////////////////////////// -->

<script>
let senha = 0;
let ultimoBalcao = null;
const midias = ['assets/1.jpg','assets/2.jpg','assets/3.jpg','assets/4.jpg'];
let midiaAtual = 0;

function mostrarMidia() {
  const container = document.getElementById('midiashow');
  const arquivo = midias[midiaAtual];
  container.innerHTML = '';
  if (arquivo.endsWith('.mp4')) {
    const video = document.createElement('video');
    video.src = arquivo;
    video.autoplay = true;
    video.loop = true;
    video.muted = true;
    container.appendChild(video);
  } else {
    const img = document.createElement('img');
    img.src = arquivo;
    container.appendChild(img);
  }
  midiaAtual = (midiaAtual + 1) % midias.length;
}
setInterval(mostrarMidia, 3000);
mostrarMidia();

function tocarSons(s, b) {
  const somSenha = new Audio(`sons/senha${s}.mp3`);
  const somBalcao = new Audio(`sons/balcao${b}.mp3`);
  somSenha.play().then(() => somBalcao.play());
}

function piscarElemento(el) {
  el.classList.remove('piscar');
  void el.offsetWidth;
  el.classList.add('piscar');
}

document.addEventListener('keydown', e => {
  const tecla = e.key.toUpperCase();

  if (['1','2','3','4'].includes(tecla)) {
    senha++;
    ultimoBalcao = tecla;
    const senhaEl = document.getElementById('senha');
    const balcaoEl = document.getElementById('balcao');
    senhaEl.textContent = `Senha ${senha}`;
    balcaoEl.textContent = `BalcÃ£o ${tecla}`;
    piscarElemento(senhaEl);
    piscarElemento(balcaoEl);
    tocarSons(senha, tecla);
  }

  if (e.key === 'Enter' && ultimoBalcao) {
    tocarSons(senha, ultimoBalcao);
    piscarElemento(document.getElementById('senha'));
    piscarElemento(document.getElementById('balcao'));
  }

  if (e.key === 'Escape') {
    if (senha > 0) senha--;
    const senhaEl = document.getElementById('senha');
    senhaEl.textContent = `Senha ${senha}`;
    piscarElemento(senhaEl);
  }
});
</script>
</body>
</html>
